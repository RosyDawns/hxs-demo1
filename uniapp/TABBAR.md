# TabBar ä¼˜åŒ–è¯´æ˜

## âœ… å·²å®Œæˆçš„ä¼˜åŒ–

### 1. éšè—åŸç”Ÿå¯¼èˆªæ 
ä¸ºé¦–é¡µã€AIåŠ©æ‰‹ã€èƒ½é‡æ ‘ä¸‰ä¸ªé¡µé¢æ·»åŠ è‡ªå®šä¹‰å¯¼èˆªæ é…ç½®ï¼š

```json
// pages.json
{
  "path": "pages/index/index",
  "style": {
    "navigationStyle": "custom"  // éšè—åŸç”Ÿå¯¼èˆªæ 
  }
}
```

### 2. é€‚é…çŠ¶æ€æ é«˜åº¦
æ‰€æœ‰ TabBar é¡µé¢çš„é¡¶éƒ¨å…ƒç´ éƒ½é€‚é…äº†çŠ¶æ€æ é«˜åº¦ï¼š

```scss
.header {
  // åŸæ¥: padding: 30rpx;
  // ç°åœ¨: 
  padding: calc(var(--status-bar-height) + 30rpx) 30rpx 30rpx;
}
```

**é€‚é…è¯´æ˜**ï¼š
- `var(--status-bar-height)` è·å–è®¾å¤‡çŠ¶æ€æ é«˜åº¦ï¼ˆåˆ˜æµ·å±é€‚é…ï¼‰
- ä¸åŒè®¾å¤‡çŠ¶æ€æ é«˜åº¦ä¸åŒï¼Œä½¿ç”¨ CSS å˜é‡è‡ªåŠ¨é€‚é…

### 3. ç»Ÿä¸€åº•éƒ¨é—´è·
æ‰€æœ‰ TabBar é¡µé¢ç»Ÿä¸€è®¾ç½®åº•éƒ¨é—´è·ï¼š

```scss
.page {
  padding-bottom: 120rpx;  // ä¸º TabBar é¢„ç•™ç©ºé—´
}
```

**åº•éƒ¨é—´è·å¯¹ç…§**ï¼š
- é¦–é¡µ: 120rpx
- AIåŠ©æ‰‹: 220rpxï¼ˆå› ä¸ºæœ‰åº•éƒ¨è¾“å…¥æ¡†ï¼‰
- èƒ½é‡æ ‘: 120rpx
- æ¶ˆæ¯: 120rpx
- æˆ‘çš„: 120rpx

### 4. ä¿®æ­£å›ºå®šå…ƒç´ ä½ç½®
ä¿®æ­£åº•éƒ¨å›ºå®šå…ƒç´ ï¼ˆèƒ½é‡æ ‘æŒ‰é’®ã€AIè¾“å…¥æ¡†ï¼‰çš„ä½ç½®ï¼š

```scss
.bottom-element {
  position: fixed;
  // åŸæ¥: bottom: 160rpx;
  // ç°åœ¨:
  bottom: calc(100rpx + env(safe-area-inset-bottom));
}
```

**è¯´æ˜**ï¼š
- `env(safe-area-inset-bottom)` é€‚é… iPhone X ç­‰è®¾å¤‡çš„åº•éƒ¨å®‰å…¨åŒºåŸŸ
- ç¡®ä¿å›ºå®šå…ƒç´ ä¸è¢« TabBar é®æŒ¡

## ğŸ“± å„é¡µé¢å…·ä½“ä¼˜åŒ–

### é¦–é¡µ (index)
- âœ… è‡ªå®šä¹‰å¯¼èˆªæ ï¼ˆé€æ˜æ¸å˜æ•ˆæœï¼‰
- âœ… é¡¶éƒ¨ header é€‚é…çŠ¶æ€æ 
- âœ… Banner ä½ç½®è°ƒæ•´
- âœ… åº•éƒ¨é¢„ç•™ 120rpx

**å…³é”®æ ·å¼**ï¼š
```scss
.header {
  padding: calc(var(--status-bar-height) + 20rpx) 30rpx 20rpx;
}
.banner {
  margin-top: calc(var(--status-bar-height) + 140rpx);
}
```

### AIåŠ©æ‰‹ (ai-assistant)
- âœ… è‡ªå®šä¹‰å¯¼èˆªæ 
- âœ… é¡¶éƒ¨æŒ‰é’®é€‚é…çŠ¶æ€æ 
- âœ… åº•éƒ¨è¾“å…¥æ¡†é€‚é…å®‰å…¨åŒºåŸŸ
- âœ… åº•éƒ¨é¢„ç•™ 220rpxï¼ˆè¾“å…¥æ¡†å ç”¨ï¼‰

**å…³é”®æ ·å¼**ï¼š
```scss
.input-section {
  bottom: calc(100rpx + env(safe-area-inset-bottom));
}
```

### èƒ½é‡æ ‘ (energy-tree)
- âœ… è‡ªå®šä¹‰å¯¼èˆªæ ï¼ˆå…¨å±èƒŒæ™¯ï¼‰
- âœ… ç”¨æˆ·ä¿¡æ¯æ é€‚é…çŠ¶æ€æ 
- âœ… åº•éƒ¨æŒ‰é’®ç»„é€‚é…å®‰å…¨åŒºåŸŸ
- âœ… åº•éƒ¨é¢„ç•™ 120rpx

**å…³é”®æ ·å¼**ï¼š
```scss
.user-info {
  top: calc(var(--status-bar-height) + 20rpx);
}
.bottom-btns {
  bottom: calc(100rpx + env(safe-area-inset-bottom));
}
```

### æ¶ˆæ¯ (messages)
- âœ… è‡ªå®šä¹‰å¯¼èˆªæ 
- âœ… é¡¶éƒ¨ header é€‚é…çŠ¶æ€æ 
- âœ… åŠŸèƒ½åˆ†ç±»å›¾æ ‡
- âœ… æ¶ˆæ¯åˆ—è¡¨æ˜¾ç¤º
- âœ… åº•éƒ¨é¢„ç•™ 120rpx

### æˆ‘çš„ (me)
- âœ… åŸç”Ÿå¯¼èˆªæ ï¼ˆä¿ç•™ï¼‰
- âœ… é¡¶éƒ¨ header é€‚é…çŠ¶æ€æ 
- âœ… åº•éƒ¨é¢„ç•™ 120rpx

## ğŸ¨ TabBar é…ç½®

```json
"tabBar": {
  "color": "#999999",              // æœªé€‰ä¸­æ–‡å­—é¢œè‰²
  "selectedColor": "#FF6B6B",      // é€‰ä¸­æ–‡å­—é¢œè‰²
  "backgroundColor": "#FFFFFF",    // èƒŒæ™¯è‰²
  "borderStyle": "black",          // è¾¹æ¡†æ ·å¼
  "list": [
    {
      "pagePath": "pages/index/index",
      "text": "é¦–é¡µ"
    },
    {
      "pagePath": "pages/ai-assistant/index",
      "text": "AIç®¡å®¶"
    },
    {
      "pagePath": "pages/energy-tree/index",
      "text": "èƒ½é‡æ ‘"
    },
    {
      "pagePath": "pages/messages/index",
      "text": "æ¶ˆæ¯"
    },
    {
      "pagePath": "pages/me/index",
      "text": "æˆ‘çš„"
    }
  ]
}
```

**æ³¨æ„**ï¼šæš‚æœªæ·»åŠ å›¾æ ‡ï¼Œåªæ˜¾ç¤ºæ–‡å­—ã€‚

## ğŸ“ å°ºå¯¸è§„èŒƒ

### çŠ¶æ€æ é«˜åº¦
- iPhone X åŠä»¥ä¸Š: 44px
- iPhone 8 åŠä»¥ä¸‹: 20px
- Android: 24px - 48pxï¼ˆæ ¹æ®è®¾å¤‡ï¼‰

### TabBar é«˜åº¦
- å°ç¨‹åºæ ‡å‡†: 50px
- åŠ ä¸Šå®‰å…¨åŒºåŸŸ: 50px + env(safe-area-inset-bottom)

### å®‰å…¨åŒºåŸŸ
- iPhone X ç³»åˆ—åº•éƒ¨: 34px
- å…¶ä»–è®¾å¤‡: 0px

## ğŸ”§ CSS å˜é‡è¯´æ˜

### --status-bar-height
- **è¯´æ˜**: è®¾å¤‡çŠ¶æ€æ é«˜åº¦
- **ç”¨æ³•**: `calc(var(--status-bar-height) + é¢å¤–é«˜åº¦)`
- **ç¤ºä¾‹**: `padding-top: calc(var(--status-bar-height) + 20rpx)`

### env(safe-area-inset-bottom)
- **è¯´æ˜**: åº•éƒ¨å®‰å…¨åŒºåŸŸé«˜åº¦
- **ç”¨æ³•**: `calc(å›ºå®šé«˜åº¦ + env(safe-area-inset-bottom))`
- **ç¤ºä¾‹**: `bottom: calc(100rpx + env(safe-area-inset-bottom))`

### env(safe-area-inset-top)
- **è¯´æ˜**: é¡¶éƒ¨å®‰å…¨åŒºåŸŸé«˜åº¦
- **ç”¨æ³•**: åŒä¸Š
- **æ³¨æ„**: é€šå¸¸ä¸ `--status-bar-height` é…åˆä½¿ç”¨

## âœ… æµ‹è¯•è¦ç‚¹

### 1. ä¸åŒè®¾å¤‡æµ‹è¯•
- [ ] iPhone 8/SE (æ— åˆ˜æµ·)
- [ ] iPhone X/11/12 (åˆ˜æµ·å±)
- [ ] iPhone 14 Pro (çµåŠ¨å²›)
- [ ] Android å„å°ºå¯¸

### 2. åŠŸèƒ½æµ‹è¯•
- [x] TabBar åˆ‡æ¢æ­£å¸¸
- [x] é¡¶éƒ¨ä¸è¢«çŠ¶æ€æ é®æŒ¡
- [x] åº•éƒ¨ä¸è¢« TabBar é®æŒ¡
- [x] å›ºå®šå…ƒç´ ä½ç½®æ­£ç¡®
- [x] æ»šåŠ¨æµç•…æ— æŠ–åŠ¨

### 3. æ ·å¼æµ‹è¯•
- [x] çŠ¶æ€æ é¢œè‰²é€‚é…
- [x] TabBar é¢œè‰²æ­£ç¡®
- [x] é¡µé¢é—´è·ç»Ÿä¸€
- [x] å®‰å…¨åŒºåŸŸé€‚é…

## ğŸš€ ä¸‹ä¸€æ­¥ä¼˜åŒ–

1. **æ·»åŠ  TabBar å›¾æ ‡** (81x81px)
   - é¦–é¡µå›¾æ ‡
   - AIç®¡å®¶å›¾æ ‡
   - èƒ½é‡æ ‘å›¾æ ‡
   - æ¶ˆæ¯å›¾æ ‡
   - æˆ‘çš„å›¾æ ‡

2. **è‡ªå®šä¹‰ TabBar**ï¼ˆå¯é€‰ï¼‰
   - æ›´çµæ´»çš„æ ·å¼
   - åŠ¨ç”»æ•ˆæœ
   - ä¸­é—´å‡¸èµ·æŒ‰é’®

3. **æ€§èƒ½ä¼˜åŒ–**
   - é¡µé¢åˆ‡æ¢åŠ¨ç”»
   - é¢„åŠ è½½ä¼˜åŒ–

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **ä¸åŒå¹³å°å·®å¼‚**
   - iOS: ä½¿ç”¨ `env(safe-area-inset-*)`
   - Android: éƒ¨åˆ†è®¾å¤‡ä¸æ”¯æŒ
   - H5: éœ€è¦é¢å¤–é€‚é…

2. **è°ƒè¯•æŠ€å·§**
   - ä½¿ç”¨çœŸæœºè°ƒè¯•æŸ¥çœ‹çŠ¶æ€æ æ•ˆæœ
   - æ¨¡æ‹Ÿå™¨å¯èƒ½ä¸å‡†ç¡®
   - å¤šæµ‹è¯•ä¸åŒè®¾å¤‡

3. **å¸¸è§é—®é¢˜**
   - çŠ¶æ€æ è¢«é®æŒ¡ â†’ æ£€æŸ¥ `--status-bar-height`
   - TabBar é®æŒ¡å†…å®¹ â†’ æ£€æŸ¥ `padding-bottom`
   - åº•éƒ¨æŒ‰é’®ä½ç½®ä¸å¯¹ â†’ æ£€æŸ¥ `env(safe-area-inset-bottom)`
