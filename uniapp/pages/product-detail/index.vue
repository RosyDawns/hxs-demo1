<template>
  <view class="page">
    <!-- å•†å“å›¾ç‰‡ -->
    <image src="/static/images/img_39.jpg" class="cover" mode="aspectFill" />
    
    <!-- å•†å“ä¿¡æ¯ -->
    <view class="info-card">
      <view class="price-row">
        <view class="coupon-badge">åˆ¸å</view>
        <text class="price">Â¥{{ product.price }}</text>
        <text class="discount">3.0æŠ˜</text>
        <text class="original">Â¥{{ Math.floor(product.price * 1.1) }}</text>
        <text class="sold">å·²å”® 6000</text>
      </view>
      <text class="title">[ä½“éªŒå¡]1å¯¹1æ¸¸æ³³é›¶åŸºç¡€è›™æ³³/è‡ªç”±æ³³ï¼ˆæ–°äººç¦åˆ©ï¼‰</text>
      <view class="rating-row">
        <image src="/static/images/img-12.jpg" class="avatar" mode="aspectFill" />
        <text class="rate">100%å¥½è¯„</text>
        <text class="comment">"æ•™ç»ƒå¾ˆä¸“ä¸šï¼Œç¯å¢ƒå¾ˆä¸é”™</text>
        <text class="count">å…±183ä¸ªæ¶ˆè´¹è¯„ä»·</text>
      </view>
      <view class="rules">
        <view class="rule"><text class="key">é™åˆ¶</text><text class="val">æ¯äººé™è´­1å¼ </text></view>
        <view class="rule"><text class="key">é¡»çŸ¥</text><text class="val">éœ€é¢„çº¦ Â· å‘¨ä¸€è‡³å‘¨æ—¥10:00-22:00å¯ç”¨</text></view>
        <view class="rule"><text class="key">ä¿éšœ</text><text class="val">éšæ—¶é€€ Â· è¿‡æœŸé€€</text></view>
      </view>
    </view>

    <!-- Tabåˆ‡æ¢ -->
    <view class="tabs">
      <text v-for="tab in tabs" :key="tab.key" class="tab" :class="{ active: activeTab === tab.key }" @tap="activeTab = tab.key">{{ tab.label }}</text>
    </view>

    <!-- å†…å®¹åŒº -->
    <view class="content">
      <view v-if="activeTab === 'details'" class="section">
        <view class="section-title">æ¸¸æ³³ä¸€å¯¹ä¸€ä½“éªŒè¯¾ç¨‹</view>
        <text class="desc">[ä½“éªŒå¡]1å¯¹1æ¸¸æ³³é›¶åŸºç¡€è›™æ³³/è‡ªç”±æ³³ï¼ˆæ–°äººç¦åˆ©ï¼‰</text>
        <text class="item">æ¸¸æ³³ç§ç±»: å¯è‡ªé€‰</text>
        <text class="item">è¯¾ç¨‹æ—¶é•¿: 45åˆ†é’Ÿ</text>
      </view>
      <view v-else-if="activeTab === 'notices'" class="section">
        <text class="notice">1. è¯·è‡³å°‘æå‰24å°æ—¶é¢„çº¦è¯¾ç¨‹ã€‚</text>
        <text class="notice">2. è¯¾ç¨‹éœ€åœ¨è´­ä¹°å30å¤©å†…ä½¿ç”¨ï¼Œé€¾æœŸä½œåºŸã€‚</text>
        <text class="notice">3. è¯·è‡ªå¸¦æ³³è¡£ã€æ³³å¸½ã€æ³³é•œç­‰ä¸ªäººç‰©å“ã€‚</text>
      </view>
      <view v-else class="section">
        <text class="review-title">è¯„ä»·è¯¦æƒ… ({{ product.reviews }})</text>
        <view class="review-item" v-for="(r, i) in reviews" :key="i">
          <view class="review-header">
            <image :src="r.avatar" class="review-avatar" mode="aspectFill" />
            <text class="review-name">{{ r.name }}</text>
            <text class="review-date">{{ r.date }}</text>
          </view>
          <text class="review-stars">â­â­â­â­â­</text>
          <text class="review-text">{{ r.text }}</text>
        </view>
      </view>
    </view>

    <!-- åº•éƒ¨è´­ä¹°æ  -->
    <view class="footer">
      <view class="icon-btn">ğŸ’¬</view>
      <view class="icon-btn">ğŸ›’</view>
      <view class="buy-btn" @tap="handleBuy">ç«‹å³è´­ä¹°</view>
    </view>
  </view>
</template>

<script>
export default {
  data() {
    return {
      product: { price: 38, reviews: 183 },
      tabs: [
        { key: 'details', label: 'å›¢è´­è¯¦æƒ…' },
        { key: 'notices', label: 'è´­ä¹°é¡»çŸ¥' },
        { key: 'reviews', label: 'ç½‘å‹è¯„ä»·' }
      ],
      activeTab: 'details',
      reviews: [
        { avatar: '/static/images/img-12.jpg', name: 'æ***ç”Ÿ', date: '2023-06-15', text: 'æ•™ç»ƒå¾ˆä¸“ä¸šï¼Œç¯å¢ƒå¾ˆä¸é”™ï¼Œæ¨èï¼' },
        { avatar: '/static/images/img-12.jpg', name: 'ç‹***å¥³', date: '2023-06-10', text: 'éå¸¸æ»¡æ„ï¼Œä¼šç»§ç»­è´­ä¹°ã€‚' }
      ]
    }
  },
  methods: {
    handleBuy() { uni.showToast({ title: 'è´­ä¹°åŠŸèƒ½', icon: 'none' }) }
  }
}
</script>

<style lang="scss" scoped>
.page { background: #f7f7f7; min-height: 100vh; padding-bottom: 140rpx; }
.cover { width: 100%; height: 600rpx; }
.info-card { background: #fff; margin: 20rpx; padding: 30rpx; border-radius: 24rpx; }
.price-row { display: flex; align-items: center; margin-bottom: 20rpx; background: #fff4f0; padding: 16rpx; border-radius: 12rpx; }
.coupon-badge { background: #ff6b6b; color: #fff; font-size: 20rpx; padding: 4rpx 12rpx; border-radius: 8rpx; margin-right: 12rpx; }
.price { color: #ff6b6b; font-size: 40rpx; font-weight: 700; margin-right: 12rpx; }
.discount { border: 2rpx solid #ff6b6b; color: #ff6b6b; font-size: 20rpx; padding: 4rpx 8rpx; border-radius: 8rpx; margin-right: 12rpx; }
.original { color: #999; font-size: 24rpx; text-decoration: line-through; margin-right: auto; }
.sold { color: #999; font-size: 22rpx; }
.title { font-size: 30rpx; font-weight: 700; color: #222; margin-bottom: 20rpx; display: block; }
.rating-row { display: flex; align-items: center; margin-bottom: 24rpx; font-size: 22rpx; color: #666; }
.avatar { width: 40rpx; height: 40rpx; border-radius: 50%; margin-right: 12rpx; }
.rate, .comment { margin-right: 12rpx; }
.count { margin-left: auto; }
.rules .rule { display: flex; margin-bottom: 16rpx; font-size: 24rpx; }
.rule .key { color: #222; font-weight: 600; margin-right: 16rpx; width: 80rpx; }
.rule .val { color: #666; flex: 1; }
.tabs { background: #fff; display: flex; padding: 0 20rpx; border-bottom: 1rpx solid #f0f0f0; }
.tab { padding: 24rpx 30rpx; font-size: 26rpx; color: #666; }
.tab.active { color: #ff6b6b; border-bottom: 4rpx solid #ff6b6b; font-weight: 600; }
.content { background: #fff; padding: 30rpx; }
.section { }
.section-title { background: #fff4f0; padding: 20rpx 24rpx; font-size: 26rpx; color: #222; margin-bottom: 20rpx; border-radius: 12rpx; }
.desc { font-size: 28rpx; font-weight: 700; color: #222; margin-bottom: 16rpx; display: block; }
.item { font-size: 24rpx; color: #666; margin-bottom: 12rpx; display: block; }
.notice { font-size: 24rpx; color: #666; margin-bottom: 16rpx; display: block; line-height: 1.6; }
.review-title { font-size: 28rpx; font-weight: 700; color: #222; margin-bottom: 24rpx; display: block; }
.review-item { margin-bottom: 32rpx; padding-bottom: 32rpx; border-bottom: 1rpx solid #f0f0f0; }
.review-item:last-child { border: none; }
.review-header { display: flex; align-items: center; margin-bottom: 12rpx; }
.review-avatar { width: 60rpx; height: 60rpx; border-radius: 50%; margin-right: 16rpx; }
.review-name { flex: 1; font-size: 24rpx; color: #666; }
.review-date { font-size: 22rpx; color: #999; }
.review-stars { font-size: 24rpx; margin-bottom: 12rpx; display: block; }
.review-text { font-size: 26rpx; color: #333; line-height: 1.6; }
.footer { position: fixed; bottom: 0; left: 0; right: 0; background: #fff; display: flex; align-items: center; padding: 20rpx 30rpx; padding-bottom: calc(20rpx + env(safe-area-inset-bottom)); box-shadow: 0 -2rpx 16rpx rgba(0,0,0,.06); }
.icon-btn { width: 96rpx; height: 96rpx; background: #f5f5f5; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 36rpx; margin-right: 20rpx; }
.buy-btn { flex: 1; background: linear-gradient(90deg, #ff8a4c, #ff6b6b); color: #fff; text-align: center; padding: 24rpx 0; border-radius: 999rpx; font-size: 32rpx; font-weight: 700; }
</style>
