# 首页双模式切换功能说明

## 更新时间
2025-10-13

## 功能概述

为**首页（IndexPage）**添加了两种显示模式切换功能，用户可以通过重复点击"关注"、"推荐"、"附近"标签在两种模式间切换。

## 🎯 两种显示模式

### 模式1：列表模式（默认）
**显示内容**：
- 大尺寸头像（180px高度）
- 小头像 + 姓名
- 资质认证信息
- 擅长技能
- 评分星级 ★★★★☆
- 服务标签（到店/上门/线上）

**特点**：信息详细，适合对比选择教练

### 模式2：内容卡片模式
**显示内容**：
- 正方形头像图片（1:1比例）
- 资质作为标题（2行截断）
- 小头像 + 姓名
- 点赞按钮 + 点赞数

**特点**：类似内容卡片风格，简洁清爽

## 🔄 切换逻辑

### 切换流程
```
点击"关注"/"推荐"/"附近"标签：

初始：模式1（列表模式）
  ↓ 再次点击同一标签
切换：模式2（内容卡片）
  ↓ 再次点击同一标签
切换：回到模式1（列表模式）
  ↓ 继续循环...
```

### 代码实现
```javascript
const handleCategoryClick = (category) => {
  const toggleableCategories = ["关注", "推荐", "附近"];
  
  // 如果点击的是当前已选中的分类，且是可切换分类，则切换模式
  if (selectedCategory.value === category && toggleableCategories.includes(category)) {
    // 在两种模式间切换
    viewMode.value = viewMode.value === "mode1" ? "mode2" : "mode1";
  } else {
    // 切换到新分类，重置为模式1
    selectedCategory.value = category;
    if (toggleableCategories.includes(category)) {
      viewMode.value = "mode1";
    }
  }
}
```

## 📊 模式对比

| 特性 | 模式1（列表） | 模式2（卡片） |
|------|-------------|-------------|
| 头像尺寸 | 180px高 | 正方形1:1 |
| 显示信息 | 详细完整 | 精简摘要 |
| 评分显示 | ✅ 星级 | ❌ |
| 服务标签 | ✅ | ❌ |
| 点赞功能 | ❌ | ✅ |
| 适用场景 | 对比选择 | 快速浏览 |
| 视觉风格 | 信息丰富 | 简洁美观 |

## 🎨 页面效果

### 模式1 - 列表模式（默认）
```
┌─────────────┬─────────────┐
│ [头像图片]  │ [头像图片]  │
│ ◯ 李教练    │ ◯ 赵教练    │
│国家一级...  │国家一级...  │
│擅长:长泳... │擅长:仰泳... │
│4.8 ★★★★☆   │4.9 ★★★★★  │
│   到店服务  │   上门服务  │
└─────────────┴─────────────┘
```

### 模式2 - 内容卡片
```
┌─────────────┬─────────────┐
│ [正方形图]  │ [正方形图]  │
│国家一级游.. │国家一级游.. │
│◯ 李教练 ♡56│◯ 赵教练 ♡78│
└─────────────┴─────────────┘
```

## 💡 数据使用

使用相同的 `coaches` 数据源，在不同模式下展示不同信息：

```javascript
coaches: [
  {
    id: 1,
    name: "李教练",
    avatar: "...",           // 大图
    pic: "...",              // 小头像
    qualification: "国家一级游泳运动员",
    skills: "长泳/自由泳",
    rating: 4.8,
    label: "到店服务"
  }
]
```

**模式1使用**：avatar, pic, name, qualification, skills, rating, label
**模式2使用**：avatar, pic, name, qualification, 点赞数（随机生成）

## ✅ 功能清单

### 首页标签功能
- ✅ 关注标签：循环切换 mode1 ⇄ mode2
- ✅ 推荐标签：循环切换 mode1 ⇄ mode2
- ✅ 附近标签：循环切换 mode1 ⇄ mode2
- ✅ 筛选标签：不支持切换，保持当前模式
- ✅ 直播标签：不支持切换，保持当前模式

### 标签间切换
- ✅ 切换到新标签时自动重置为模式1
- ✅ 可切换标签：关注、推荐、附近
- ✅ 不可切换标签：筛选、直播

## 🧪 测试要点

1. **模式切换测试**
   ```
   ✅ 点击"关注"2次，验证 mode1 → mode2 → mode1
   ✅ 点击"推荐"2次，验证完整循环
   ✅ 点击"附近"2次，验证完整循环
   ```

2. **标签切换测试**
   ```
   ✅ 在mode2下点击"推荐"，验证切换到推荐的mode1
   ✅ 在mode2下点击"附近"，验证切换到附近的mode1
   ```

3. **不可切换标签测试**
   ```
   ✅ 点击"筛选"多次，验证不触发模式切换
   ✅ 点击"直播"多次，验证不触发模式切换
   ```

4. **显示效果测试**
   ```
   ✅ mode1显示完整信息（评分、标签）
   ✅ mode2显示简化信息（点赞按钮）
   ✅ mode2图片为正方形1:1比例
   ✅ mode2标题文本截断为2行
   ```

## 🔍 关键实现

### 1. 模式状态管理
```javascript
const viewMode = ref("mode1");  // 默认模式1
```

### 2. 条件渲染
```vue
<!-- 模式1：列表模式 -->
<template v-if="viewMode === 'mode1'">
  <!-- 完整信息展示 -->
</template>

<!-- 模式2：内容卡片 -->
<template v-else>
  <!-- 简化信息展示 -->
</template>
```

### 3. 智能切换
- 同一标签：切换模式
- 不同标签：重置为mode1
- 可切换标签：关注、推荐、附近
- 不可切换标签：筛选、直播

### 4. 样式支持
```css
.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}
```

## 📱 用户体验

### 优势
- ✅ **简单直观**：重复点击标签即可切换
- ✅ **自动重置**：切换标签时自动回到mode1
- ✅ **信息灵活**：根据需求选择查看详细或简略信息
- ✅ **视觉一致**：两种模式都保持2列网格布局

### 交互逻辑
```
用户意图：
- 想看其他分类 → 点击其他标签（自动重置mode1）
- 想换个视角 → 重复点击当前标签（切换模式）
```

## 📄 相关文件

- **页面文件**: `src/views/IndexPage.vue`
- **模式1**: 列表模式（默认）
- **模式2**: 内容卡片模式

## 🎉 完成状态

首页双模式切换功能已完成！用户可以通过重复点击"关注"、"推荐"、"附近"标签在两种显示模式间自由切换，获得不同的浏览体验。

## 🌟 与排行榜页面的区别

| 特性 | 首页 | 排行榜（冠军/非遗） |
|------|------|-------------------|
| 模式数量 | 2种 | 3种 |
| 默认模式 | mode1（列表） | mode1（大师卡片） |
| 切换方式 | 2模式循环 | 3模式循环 |
| 可切换标签 | 关注/推荐/附近 | 关注/推荐/附近 |
