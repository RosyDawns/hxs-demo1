# 模式切换逻辑更新说明

## 更新时间
2025-10-13

## 更新内容

### 🔄 新的切换逻辑

在冠军大师和非遗大师页面，**关注、推荐、附近** 三个标签支持模式切换功能。

#### 切换规则

1. **首次点击标签**
   - 切换到该标签
   - 显示大师卡片模式

2. **再次点击同一标签**
   - 标签保持选中
   - 在大师模式 ⇄ 作品模式之间切换

3. **点击其他标签**
   - 切换到新标签
   - 重置为大师卡片模式

4. **筛选、直播标签**
   - 不支持模式切换
   - 始终显示大师卡片模式

### 📋 操作流程示例

#### 场景1：在同一标签切换模式
```
初始状态：关注标签（大师模式）
↓
点击"关注" → 切换到作品模式
↓
再点击"关注" → 切换回大师模式
↓
再点击"关注" → 切换到作品模式
...（循环切换）
```

#### 场景2：切换不同标签
```
关注标签（作品模式）
↓
点击"推荐" → 切换到推荐标签（大师模式）
↓
点击"推荐" → 保持推荐标签（切换到作品模式）
↓
点击"附近" → 切换到附近标签（大师模式）
```

#### 场景3：不可切换标签
```
关注标签（作品模式）
↓
点击"筛选" → 切换到筛选标签（大师模式，无法再切换）
↓
点击"直播" → 切换到直播标签（大师模式，无法再切换）
```

### 💡 技术实现

```javascript
selectFilterTab(tabId) {
  // 可切换模式的标签
  const toggleableTabs = ["follow", "recommend", "nearby"];
  
  if (this.selectedCategory !== "popular") {
    // 如果点击的是当前已选中的标签，且是可切换标签
    if (this.selectedFilterTab === tabId && toggleableTabs.includes(tabId)) {
      // 切换模式
      this.viewMode = this.viewMode === "master" ? "content" : "master";
    } else {
      // 切换到新标签，默认显示大师模式
      this.selectedFilterTab = tabId;
      if (toggleableTabs.includes(tabId)) {
        this.viewMode = "master";
      }
    }
  } else {
    this.selectedFilterTab = tabId;
  }
}
```

### 🎯 标签功能对比

| 标签 | 可切换模式 | 操作方式 |
|------|-----------|---------|
| 关注 | ✅ 是 | 重复点击切换 |
| 推荐 | ✅ 是 | 重复点击切换 |
| 附近 | ✅ 是 | 重复点击切换 |
| 筛选 | ❌ 否 | 仅显示大师模式 |
| 直播 | ❌ 否 | 仅显示大师模式 |

### 🎨 组件分离

使用 `<template>` 标签包裹不同模式的内容，确保组件完全分离：

```vue
<!-- 大师卡片模式 -->
<template v-if="viewMode === 'master'">
  <div class="grid grid-cols-2 gap-3">
    <ChampionMasterCard ... />
  </div>
</template>

<!-- 作品内容模式 -->
<template v-else>
  <div class="grid grid-cols-2 gap-3">
    <ContentCard ... />
  </div>
</template>
```

### ✅ 功能验证

#### 测试步骤

1. **测试关注标签切换**
   ```
   ✅ 点击"关注" → 确认显示大师卡片
   ✅ 再点击"关注" → 确认切换到作品内容
   ✅ 再点击"关注" → 确认切回大师卡片
   ```

2. **测试推荐标签切换**
   ```
   ✅ 点击"推荐" → 确认显示大师卡片
   ✅ 再点击"推荐" → 确认切换到作品内容
   ✅ 再点击"推荐" → 确认切回大师卡片
   ```

3. **测试附近标签切换**
   ```
   ✅ 点击"附近" → 确认显示大师卡片
   ✅ 再点击"附近" → 确认切换到作品内容
   ✅ 再点击"附近" → 确认切回大师卡片
   ```

4. **测试标签间切换**
   ```
   ✅ 在"关注"作品模式下，点击"推荐" → 确认显示大师模式
   ✅ 在"推荐"作品模式下，点击"附近" → 确认显示大师模式
   ✅ 在"附近"作品模式下，点击"筛选" → 确认显示大师模式且无法切换
   ```

5. **测试不可切换标签**
   ```
   ✅ 点击"筛选"标签 → 确认只显示大师模式
   ✅ 再点击"筛选"标签 → 确认仍是大师模式（无切换）
   ✅ 点击"直播"标签 → 确认只显示大师模式
   ```

### 🔍 关键改进点

1. **智能判断**：根据当前选中标签和点击标签判断是否切换模式
2. **标签分类**：可切换标签（关注/推荐/附近）vs 不可切换标签（筛选/直播）
3. **组件分离**：使用 `<template>` 确保两种模式组件完全独立
4. **状态重置**：切换到新标签时自动重置为大师模式
5. **循环切换**：在同一标签上可以无限次切换模式

### 📱 用户体验

#### 优势
- ✅ **直观操作**：重复点击同一标签即可切换模式
- ✅ **清晰反馈**：标签高亮状态保持，内容区域明显变化
- ✅ **灵活切换**：三个主要标签都支持模式切换
- ✅ **防止误操作**：切换标签时自动重置，避免混淆

#### 交互逻辑
```
用户意图：查看不同类型内容
操作方式：
- 想看其他标签内容 → 点击其他标签
- 想切换当前内容类型 → 重复点击当前标签
```

## 🎉 完成状态

模式切换逻辑已优化完成！用户可以通过重复点击关注、推荐、附近标签在两种显示模式之间自由切换。
