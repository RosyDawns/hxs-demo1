<template>
  <div class="page pb-20">
    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <header class="fixed top-0 left-0 right-0 bg-[#F5E9D9] z-50 pl-4 pr-10 py-3 flex items-center justify-between">
      <button class="w-8 h-8 flex items-center justify-center" @click="goBack">
        <i class="fa fa-chevron-left text-xl text-gray-700"></i>
      </button>
      <div class="flex items-center justify-center flex-1 gap-2">
        <i class="fa fa-circle text-white text-xl"></i>
      </div>
      <div class="text-sm text-gray-700">
        <i class="fa fa-star text-gray-700 mr-1"></i>
        4.9
      </div>
    </header>

    <!-- é¡µé¢å†…å®¹ -->
    <div class="pt-14 bg-gray-50 min-h-screen">
      <!-- å¾…ä»˜æ¬¾æ ‡é¢˜å’Œå€’è®¡æ—¶ -->
      <div class="bg-[#F5E9D9] px-4 pt-3 pb-4">
        <h1 class="text-2xl font-medium text-gray-900 mb-1">å¾…ä»˜æ¬¾</h1>
        <div class="flex items-center text-sm text-gray-600">
          <span class="mr-2">å‰©</span>
          <span class="text-red-500 font-bold">{{ countdown }}</span>
          <span class="ml-2">æ”¯ä»˜å…³é—­</span>
        </div>
      </div>

      <!-- åˆ†äº«æ¨ªå¹… -->
      <div class="bg-gradient-to-r from-orange-400 to-orange-500 mx-4 mt-4 rounded-lg p-3 flex items-center justify-between text-white">
        <span class="text-sm">åˆ†äº«ç»™å¥½å‹ï¼Œä¸€èµ·ç»„å›¢å»ç©å‘€~</span>
        <button class="flex items-center gap-1 text-sm">
          <i class="fa fa-share-alt"></i>
          <span>åˆ†äº«æ´»åŠ¨</span>
        </button>
      </div>

      <!-- æ´»åŠ¨ä¿¡æ¯å¡ç‰‡ -->
      <div class="bg-white mt-4 mx-4 rounded-lg p-4">
        <h2 class="text-base font-medium text-gray-900 mb-3">HOB Clubå‘¨äºŒç¯®çƒå…¨åœºå±€</h2>
        
        <div class="space-y-2">
          <div class="flex items-start text-sm">
            <i class="fa fa-clock text-gray-400 mr-3 mt-0.5"></i>
            <div class="flex-1">
              <span class="text-gray-600">æ´»åŠ¨æ—¶é—´</span>
              <span class="ml-2 text-gray-900">11.04 å‘¨äºŒ 20:00-22:00</span>
            </div>
          </div>
          
          <div class="flex items-start text-sm">
            <i class="fa fa-map-marker-alt text-gray-400 mr-3 mt-0.5"></i>
            <div class="flex-1">
              <span class="text-gray-600">æ´»åŠ¨åœ°ç‚¹</span>
              <span class="ml-2 text-gray-900">FIBAç¯®çƒä¹‹å®¶æ´›å…‹å…¬å›­SSRè¿åŠ¨å¨±ä¹ä¸­å¿ƒ(å…‰å¤§ä¼šå±•ä¸­å¿ƒåº—)</span>
            </div>
            <i class="fa fa-chevron-right text-gray-400 ml-2"></i>
          </div>
        </div>

        <div class="flex items-center justify-end mt-4 pt-4 border-t border-gray-100">
          <span class="text-xl font-bold text-red-500">Â¥80</span>
        </div>
      </div>

      <!-- æŠ¥åä¿¡æ¯ -->
      <div class="bg-white mt-4 mx-4 rounded-lg p-4">
        <h3 class="text-base font-medium text-gray-900 mb-3">æŠ¥åä¿¡æ¯</h3>
        <div class="space-y-2">
          <div class="flex text-sm">
            <span class="text-gray-600 w-20">å‡ºè¡Œäºº</span>
            <div class="flex-1">
              <div class="text-gray-900">å­™æ°¸èƒœ</div>
              <div class="text-gray-500 mt-1">æ‰‹æœºå·ï¼š181****3973</div>
            </div>
          </div>
        </div>
      </div>

      <!-- è®¢å•ä¿¡æ¯ -->
      <div class="bg-white mt-4 mx-4 rounded-lg p-4">
        <h3 class="text-base font-medium text-gray-900 mb-3">è®¢å•ä¿¡æ¯</h3>
        <div class="space-y-2 text-sm">
          <div class="flex items-center">
            <span class="text-gray-600 w-20">è®¢å•ç¼–å·</span>
            <span class="text-gray-900 flex-1">7567599871021107243</span>
            <button class="text-orange-500 text-xs">å¤åˆ¶</button>
          </div>
          <div class="flex">
            <span class="text-gray-600 w-20">è®¢å•çŠ¶æ€</span>
            <span class="text-gray-900">å¾…æ”¯ä»˜</span>
          </div>
          <div class="flex">
            <span class="text-gray-600 w-20">ä¸‹å•æ—¶é—´</span>
            <span class="text-gray-900">2025-11-02 11:56</span>
          </div>
        </div>
      </div>

      <!-- æ´»åŠ¨ä¸»ç†äºº -->
      <div class="bg-white mt-4 mx-4 rounded-lg p-4">
        <h3 class="text-base font-medium text-gray-900 mb-3">æ´»åŠ¨ä¸»ç†äºº</h3>
        <div class="flex items-center justify-between">
          <div class="flex items-center gap-3">
            <img 
              src="/src/assets/images/img-23.jpg" 
              class="w-10 h-10 rounded-full object-cover" 
              alt="ä¸»ç†äººå¤´åƒ"
            />
            <div>
              <div class="flex items-center gap-2">
                <span class="text-sm font-medium text-gray-900">é˜¿æ‰EffortğŸ€</span>
                <span class="text-xs text-gray-500">(å‰...</span>
              </div>
              <div class="flex items-center gap-3 mt-1">
                <span class="text-xs text-gray-500">æ´»åŠ¨ 10</span>
                <span class="text-xs text-gray-500">æŠ¥å 84</span>
              </div>
              <div class="flex items-center gap-1 mt-1">
                <i class="fa fa-check-circle text-blue-500 text-xs"></i>
                <span class="text-xs text-gray-600">HOB Club</span>
              </div>
            </div>
          </div>
          <div class="flex flex-col items-center gap-2">
            <button class="flex flex-col items-center">
              <i class="fa fa-flag text-gray-400 text-lg"></i>
              <span class="text-xs text-gray-600 mt-1">Taçš„æ´»åŠ¨</span>
            </button>
            <button class="flex flex-col items-center">
              <i class="fa fa-comment text-gray-400 text-lg"></i>
              <span class="text-xs text-gray-600 mt-1">ç§ä¿¡</span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- åº•éƒ¨æ“ä½œæ  -->
    <footer class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-4 py-3 flex items-center gap-3">
      <button 
        class="flex-1 border border-gray-300 text-gray-700 font-medium py-3 rounded-full text-center"
        @click="handleCancel"
      >
        å–æ¶ˆè®¢å•
      </button>
      <button 
        class="flex-1 bg-gradient-to-r from-orange-400 to-orange-500 text-white font-medium py-3 rounded-full text-center flex items-center justify-center gap-2"
        @click="handlePay"
      >
        <span>å»æ”¯ä»˜</span>
        <span class="text-sm">{{ countdown }}</span>
      </button>
    </footer>
  </div>
</template>

<script>
export default {
  name: "ActivityPaymentPage",
  data() {
    return {
      orderId: null,
      countdown: "00:09:21",
      timer: null,
      remainingSeconds: 561 // 9åˆ†21ç§’
    };
  },
  mounted() {
    this.orderId = this.$route.params.id;
    this.startCountdown();
  },
  beforeUnmount() {
    if (this.timer) {
      clearInterval(this.timer);
    }
  },
  methods: {
    goBack() {
      this.$router.back();
    },
    startCountdown() {
      this.timer = setInterval(() => {
        if (this.remainingSeconds > 0) {
          this.remainingSeconds--;
          const minutes = Math.floor(this.remainingSeconds / 60);
          const seconds = this.remainingSeconds % 60;
          this.countdown = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
        } else {
          clearInterval(this.timer);
          alert("æ”¯ä»˜å·²è¶…æ—¶");
          this.$router.back();
        }
      }, 1000);
    },
    handleCancel() {
      if (confirm("ç¡®å®šè¦å–æ¶ˆè®¢å•å—ï¼Ÿ")) {
        console.log("å–æ¶ˆè®¢å•");
        this.$router.back();
      }
    },
    handlePay() {
      console.log("å»æ”¯ä»˜");
      // æ”¯ä»˜æˆåŠŸåè·³è½¬åˆ°å¾…å‡ºè¡Œé¡µé¢
      this.$router.push(`/activity-pending/${this.orderId}`);
    }
  }
};
</script>

<style scoped>
.page {
  background-color: #f5f5f5;
  min-height: 100vh;
}
</style>
